<!DOCTYPE html>{% load static %}<html lang="zh"><head>    <meta charset="UTF-8">    <title>公司销账</title>    <!--<link rel="stylesheet" href="../semantic/semantic.min.css"> -->    <link rel="stylesheet" href="{% static 'semantic/semantic.css'%}">    <link rel="stylesheet" href="{%static 'semantic/calendar.css' %} "><script src="http://lib.baomitu.com/jquery/1.12.4/jquery.min.js"></script>    <script src="http://lib.baomitu.com/semantic-ui-calendar/0.0.8/calendar.js"></script><script src="http://lib.baomitu.com/semantic-ui/2.2.13/semantic.min.js"></script></head><body><div id="sidebar" ></div><div class="dimmed pusher">    <div class="ui labeled icon button" id="menu">		<i class="sidebar icon"></i>		导航		</div>    <div class="ui doubling stackable container" style="padding: auto">    <div id="navigate"></div>    <div class="ui horizontal divider">俱乐部销账</div>        <div class="ui form">        <div class="fields">            <div class="field">                <label>起始时间</label>                <div class="ui calendar">                <div class="ui input left icon">                    <i class="calendar icon"></i>                    <input type="text" placeholder="选择开始日期" id="start" name="start">                </div>                </div>            </div>            <div class="field">                <label>结束时间</label>                <div class="ui calendar" >                    <div class="ui input left icon">                        <i class="calendar icon"></i>                        <input type="text" placeholder="选择截止日期" id="end" name="end">                    </div>                </div>            </div>            <div class="field">                <label>&nbsp;</label>                <button class="ui positive button" onclick="load_income()">查询</button>            </div>        </div>    </div>    <div id="income_detail">        <table class="ui celled small red table">            <thead>                <tr>                    <th colspan="8" class="center aligned">本俱乐部收入(含上交托管)</th>                </tr>                <tr>                    <th colspan="2" class="center aligned">自身收益</th>                    <th colspan="2" class="center aligned">联盟收益</th>                    <th colspan="2" class="center aligned">俱乐部内收益</th>                    <th colspan="2" class="center aligned">收益合计</th>                </tr>            </thead>            <tbody>            <tr>                <td>水钱</td>                <td>0</td>                <td>水钱</td>                <td>0</td>                <td>水钱</td>                <td>0</td>                <td>水钱</td>                <td>0</td>            </tr>            <tr>                <td>保险</td>                <td>0</td>                <td>保险</td>                <td>0</td>                <td>保险</td>                <td>0</td>                <td>保险</td>                <td>0</td>            </tr>            <tr>                <td>小计</td>                <td>0</td>                <td>小计</td>                <td>0</td>                <td>小计</td>                <td>0</td>                <td>合计</td>                <td>0</td>            </tr>    </tbody></table>    </div>    <div class="ui hidden horizontal divider"></div>        <div class="ui form" id="income_reg">            <div class="inline fields">                <div class="field">                    <label>账期</label>                    <select class="ui selected dropdown" name="reg_month" id="reg_month">                        <option value="">请选择账期</option>                        {% for t in month_list %}                            <option value={{ t }}>{{ t }}</option>                        {% endfor %}                    </select>                </div>                <div class="field">                    <button class="ui positive button" onclick="check_again()">确认</button>                </div>            </div>        </div>        <div class="ui info message">            <i class="close icon" onclick="infoclose()"></i>            <div class="header">操作提示</div>            <ul class="list"></ul>                <li>账期可以选择当前月份和上一个月份</li>                <li>销账以后，收入转为公司收入，累帐的水钱和保险等收益将清零</li>                <li>已经销账的记录，牌局记录将不能修改</li>        </div>        <div class="ui small modal" id="modal1">        <h2 class="header">确认信息</h2>        <div class="content">            <p id="msg1"></p>        </div>        <div class="actions">            <button class="ui positive button" onclick="reg()">确认</button>            <button class="ui negative button">返回</button>        </div>        </div>            <div class="ui small modal" id="modal2">        <h2 class="header">确认信息</h2>        <div class="content">            <p id="msg2"></p>        </div>        <div class="actions">            <button class="ui negative button" onclick="reload()">返回</button>        </div>        </div>    </div></div></body><script>    function load_income() {        var start = $("#start").val();        var end = $("#end").val();        $('#income_detail').load('/get_club_income_by_date/ #content', {'start_time':start,'end_time':end})    }</script><script>    $(document).ready(function () {        $('#navigate').load('/loadnavigate/');        $('#sidebar').load('/loadsidebar/');        $("#a").addClass('active red item');        $('.ui.dropdown').dropdown();        $("#menu").click(function() {            $('.ui.sidebar').sidebar('toggle');        });        $('.ui.calendar').calendar({            type: 'date',            formatter : {                date: function (date, settings) {                    if(!date) return '';                    var year = date.getFullYear();                    var month = date.getMonth() + 1;                    var day = date.getDate();                    month = month < 10 ? '0' + month : month;                    day = day < 10 ? '0' + day : day;                    return year + '-' + month + '-' + day ;                }            },            text : {                days: ['日','一','二','三','四','五','六'],                months: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],                monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],                today: '今天',                now: '现在',                am: 'AM',                pm: 'PM'            },            today : true ,            disableYear : false,	    });        //load_income();    })</script><script>    function check_again() {        var message=$("#income_reg").form('is valid');        if (message===true){            $('#msg1').text("确认将以上收入销账吗？销账后记录将不可修改！");            $('#modal1').modal('show')        }        else {            $('#msg2').text("请选择账期");            $('#modal2').modal('show');        }    }    function reg() {        var reg_month=$('#reg_month').dropdown('get value');        var start = $("#start").val();        var end = $("#end").val();        $.ajax({            url:'/company_income_reg/',            type:'post',            data: {'reg_month': reg_month,'start_time':start,'end_time':end},            success: function (result) {                if(result==="True")                {                    $('#msg2').text("销账成功");                    $('#modal2').modal('show');                }                else {                    $('#msg2').text("销账失败");                    $('#modal2').modal('show');                }            }        })    }    function reload() {        location.reload()    }</script><script>$('#income_reg').form({    on:'post',    inline : true,    fields:{        reg_month:{          identifier :'reg_month',          rules:[{              type: 'empty',              prompt: '请选择账期'          }          ]        }    }})</script></html>